<!DOCTYPE html>
<html lang="en">
   <head>
        <script src="../js/jquery.js"></script>
        <script>
            function logoutFunction(event) {
              event.preventDefault();
              window.location.href= 'https://vashama.github.io/BrewDay/BrewDay/index.html';
            }
            function brewTodayFunction(event) {
              var output = "";
              alert("In function");
              $.ajax({
                    type: "POST",
                    crossDomain: true,
                    url: "http://localhost:8080/pareto/main",
            success: function (response) {
                //code for setting session and sign in
                output = response.toString();
                alert(output);
            }
            });
              alert("output: " + output);
              window.location.href= 'https://vashama.github.io/BrewDay/BrewDay/brewToday.html';
            }
        </script>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="description" content="">
      <meta name="author" content="">
      <title>Brew Day</title>

      <link rel="icon" type="logo.jpg" href="../img/logo.png">

      <!-- Bootstrap Core CSS -->
      <link href="../css/bootstrap.min.css" rel="stylesheet">
      <!-- Custom CSS -->
      <link href="../css/brewday.css" rel="stylesheet">
      

      <style media="screen">
        .heading-2
        {
          background-image: url(img/profile_header_img.jpg);
          background-size: cover;
          height: 250px;
        }

        .panel-profile-img
        {
          width: 150px; margin-top: -100px; margin-bottom: 5px;
        }
      </style>
    </head>

   <body>

    <div class="brand">Profile</div>

    <!-- Navigation -->
    <nav class="navbar navbar-default" role="navigation">
            <div class="container">
                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                        <ul class="nav navbar-nav">
                            <li class="dropdown">
                                    <a href="#" class="dropdown-toggle" data-toggle="dropdown"> Recipes <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                        <li>
                                            <a href="userRecipes.html">My Recipes</a>
                                        </li>
                                        <li class="divider">
                                        </li>
                                        <li>
                                            <a href="myRecipes.html">Add Recipes</a>
                                        </li>
                                        <li class="divider">
                                        </li>
                                        <li>
                                            <a href="javascript:brewTodayFunction(event);">What should I brew today?</a>
                                        </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown"> Ingredients <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                    <li>
                                       <a href="myIngredients.html">My Ingredients</a>
                                    </li>
                                    <li class="divider">
                                    </li>
                                    <li>
                                        <a href="ingredients.html">Add Ingredients</a>
                                    </li>
                            </ul>
                        </li>
                            <li>
                                <a href="forum.html">Forum</a>
                            </li>
                            <li class="dropdown">
                                    <a href="#" data-toggle="dropdown" class="droptown-toggle">Documentation <b class="caret"></b></a>
                                    <ul class="dropdown-menu">
                                                <li>
                                                    <a href="grains.html">Grain Malts</a>
                                                </li>
                                                <li class="divider">
                                                </li>
                                                <li>
                                                    <a href="hops.html">Hops</a>
                                                </li>
                                                <li class="divider">
                                                </li>
                                                <li>
                                                    <a href="sugars.html">Sugars</a>
                                                </li>
                                                <li class="divider">
                                                </li>
                                                <li>
                                                    <a href="yeast.html">Yeast</a>
                                                </li>
                                                <li class="divider">
                                                </li>
                                                <li>
                                                    <a href="equipment.html">Equipment</a>
                                                </li>
                                    </ul>
                            </li>
                            <li class="dropdown">
                                    <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-user"></i>USER<b class="caret"></b></a>
                                    <ul class="dropdown-menu">
                                      <li>
                                          <a href="dashboard.html"> Dashboard</a>
                                      </li>
                                      <li class="divider">
                                      </li>
                                      <li>
                                          <a href="viewProfile.html">My Profile</a>
                                      </li>
                                      <li class="divider">
                                      </li>
                                        <li>
                                            <a href="http://localhost:8080/user/logout" onclick='logoutFunction(event);'> Log Out</a>
                                        </li>
                                    </ul>
                            </li>
                        </ul>
                </div>
                <!-- /.navbar-collapse -->
            </div>
            <!-- /.container -->
    </nav>

    <div class="container">

        <div class="row">
          <div class="box">

            <div class="panel panel-default">
                <div class="panel-heading heading-2"></div>
                <div class="panel-body text-center">
                    <img class="img-rounded panel-profile-img" src="img/user.png" alt="Profile picture">

                        <h2 id="fullname"></h2>
                        <a href="#editmodal" data-toggle="modal" class="btn btn-default">

                          <i class="glyphicon glyphicon-pencil"> </i> Edit Profile
                        </a>

                        <!-- Modal -->
                        <div id="editmodal" class="modal fade" role="dialog">
                          <div class="modal-dialog dialog-lg">

                            <!-- Modal content-->
                            <div class="modal-content">
                              <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <h4 class="modal-title">Edit Profile</h4>
                              </div>

                              <form class="form-horizontal" id="editprofile">
                              <div class="modal-body" style="width: 100%">



                                      <div class="form-group">
                                         <label class="col-md-4 control-label">First Name</label>
                                         <div class="col-md-4">
                                            <div class="input-group">
                                               <div class="input-group-addon">
                                                  <i class="glyphicon glyphicon-user">
                                                  </i>
                                               </div>
                                               <input type="text" class="form-control" name="firstname" placeholder="First Name" id="firstname" autofocus />
                                               <small id="firstname_error_msg" style="color:red"></small>
                                            </div>
                                         </div>
                                      </div>
                                      <div class="form-group">
                                         <label class="col-md-4 control-label">Last Name</label>
                                         <div class="col-md-4">
                                            <div class="input-group">
                                               <div class="input-group-addon">
                                                  <i class="glyphicon glyphicon-user">
                                                  </i>
                                               </div>
                                               <input type="text" class="form-control" name="lastname" placeholder="Last Name" id="lastname" />
                                               <small id="lastname_error_msg" style="color:red"></small>
                                            </div>
                                         </div>
                                      </div>
                                      <div class="form-group">
                                         <label class="col-md-4 control-label">New Password</label>
                                         <div class="col-md-4">
                                            <div class="input-group">
                                               <div class="input-group-addon">
                                                  <i class="glyphicon glyphicon-ok">
                                                  </i>
                                               </div>
                                               <input id="password" name="password" type="password" placeholder="Enter Password" class="form-control">
                                               <small id="password_error_msg" style="color:red"></small>
                                            </div>
                                         </div>
                                      </div>
                                      <div class="form-group">
                                         <label class="col-md-4 control-label">Re-type New Password</label>
                                         <div class="col-md-4">
                                            <div class="input-group">
                                               <div class="input-group-addon">
                                                  <i class="glyphicon glyphicon-ok">
                                                  </i>
                                               </div>
                                               <input id="password2" name="password2" type="password" placeholder="Enter Password Again" class="form-control">
                                               <small id="password2_error_msg" style="color:red"></small>
                                            </div>
                                         </div>
                                      </div>
                                      <!-- Permanent Address -->
                                      <div class="form-group">
                                         <label class="col-md-4 control-label" for="Permanent Address">Permanent Address</label>
                                         <div class="col-md-4">
                                            <div class="input-group">
                                               <div class="input-group-addon">
                                                  <i class="glyphicon glyphicon-home"></i>
                                               </div>
                                               <input id="addr" name="addr" type="text" placeholder="House number and Street name" class="form-control input-md ">
                                               <small id="addr_error_msg" style="color:red"></small>
                                            </div>
                                         </div>
                                      </div>
                                      <div class="form-group">
                                         <label class="col-md-4 control-label" for="Permanent Address">City</label>
                                         <div class="col-md-4">
                                            <div class="input-group">
                                               <div class="input-group-addon">
                                                  <i class="glyphicon glyphicon-home"></i>
                                               </div>
                                               <input id="city" name="city" type="text" placeholder="City" class="form-control input-md ">
                                               <small id="city_error_msg" style="color:red"></small>
                                            </div>
                                         </div>
                                      </div>
                                      <div class="form-group">
                                         <label class="col-md-4 control-label" for="Permanent Address">State</label>
                                         <div class="col-md-4">
                                            <select id="state" name="state" type="text" placeholder="State" class="form-control input-md ">
                                               <option value="" selected="selected">Select a State</option>
                                               <option value="AL">Alabama</option>
                                               <option value="AK">Alaska</option>
                                               <option value="AZ">Arizona</option>
                                               <option value="AR">Arkansas</option>
                                               <option value="CA">California</option>
                                               <option value="CO">Colorado</option>
                                               <option value="CT">Connecticut</option>
                                               <option value="DE">Delaware</option>
                                               <option value="FL">Florida</option>
                                               <option value="GA">Georgia</option>
                                               <option value="HI">Hawaii</option>
                                               <option value="ID">Idaho</option>
                                               <option value="IL">Illinois</option>
                                               <option value="IN">Indiana</option>
                                               <option value="IA">Iowa</option>
                                               <option value="KS">Kansas</option>
                                               <option value="KY">Kentucky</option>
                                               <option value="LA">Louisiana</option>
                                               <option value="ME">Maine</option>
                                               <option value="MD">Maryland</option>
                                               <option value="MA">Massachusetts</option>
                                               <option value="MI">Michigan</option>
                                               <option value="MN">Minnesota</option>
                                               <option value="MS">Mississippi</option>
                                               <option value="MO">Missouri</option>
                                               <option value="MT">Montana</option>
                                               <option value="NE">Nebraska</option>
                                               <option value="NV">Nevada</option>
                                               <option value="NH">New Hampshire</option>
                                               <option value="NJ">New Jersey</option>
                                               <option value="NM">New Mexico</option>
                                               <option value="NY">New York</option>
                                               <option value="NC">North Carolina</option>
                                               <option value="ND">North Dakota</option>
                                               <option value="OH">Ohio</option>
                                               <option value="OK">Oklahoma</option>
                                               <option value="OR">Oregon</option>
                                               <option value="PA">Pennsylvania</option>
                                               <option value="RI">Rhode Island</option>
                                               <option value="SC">South Carolina</option>
                                               <option value="SD">South Dakota</option>
                                               <option value="TN">Tennessee</option>
                                               <option value="TX">Texas</option>
                                               <option value="UT">Utah</option>
                                               <option value="VT">Vermont</option>
                                               <option value="VA">Virginia</option>
                                               <option value="WA">Washington</option>
                                               <option value="WV">West Virginia</option>
                                               <option value="WI">Wisconsin</option>
                                               <option value="WY">Wyoming</option>
                                            </select>
                                            <small id="state_error_msg" style="color:red"></small>
                                         </div>
                                      </div>
                                      <div class="form-group">
                                         <label class="col-md-4 control-label" for="Permanent Address">ZIP Code</label>
                                         <div class="col-md-4">
                                            <div class="input-group">
                                               <div class="input-group-addon">
                                                  <i class="glyphicon glyphicon-map-marker"></i>
                                               </div>
                                               <input id="zip" name="zip" type="text" placeholder="ZIP Code" class="form-control input-md ">
                                               <small id="zip_error_msg" style="color:red"></small>
                                            </div>
                                         </div>
                                      </div>
                                      <!-- Phone Number
                                      <div class="form-group">
                                         <label class="col-md-4 control-label" for="Phone number">Phone number</label>
                                         <div class="col-md-4">
                                            <div class="input-group">
                                               <div class="input-group-addon">
                                                  <i class="glyphicon glyphicon-phone"></i>
                                               </div>
                                               <input id="phone" name="phone" type="text" placeholder="Phone number" class="form-control input-md" maxlength="12">
                                               <small id="phone_error_msg" style="color:red"></small>
                                            </div>
                                         </div>
                                      </div>
                                      <div class="form-group">
                                         <label class="col-md-4 control-label"></label>
                                         <div class="col-md-4">
                                            <div class="input-group">

                                            </div>
                                         </div>
                                      </div>

                                      -->


                              </div>
                              <div class="modal-footer">
                                <button class="btn btn-primary" type="submit" onClick="validateCredentials()">Save Changes</button>
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                              </div>

                                </form>
                            </div>

                          </div>
                        </div>


            </div>

          </div>

<!--
          <div class="col-md-12">
            <div class="panel panel-default">
              <div class="panel-heading">
                <h4>
                  About Me
                </h4>
              </div>
              <div class="panel-body">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
              </div>
            </div>
          </div>
        -->

              <div class="col-md-3">
                <div class="panel panel-default">
                  <div class="panel-heading">
                    <h4>
                      Gender
                    </h4>
                  </div>
                  <div class="panel-body" id="gender"></div>
                </div>
              </div>

              <div class="col-md-9">
                <div class="panel panel-default">
                  <div class="panel-heading">
                    <h4>
                      Address
                    </h4>
                  </div>
                  <div class="panel-body" id="address"></div>
                </div>
              </div>
<!--
              <div class="col-md-3">
                <div class="panel panel-default">
                  <div class="panel-heading">
                    <h4>
                      Date of Birth
                    </h4>
                  </div>
                  <div class="panel-body">04/13/1988</div>
                </div>
              </div>

              <div class="col-md-6">
                <div class="panel panel-default">
                  <div class="panel-heading">
                    <h4>
                      Occupation
                    </h4>
                  </div>
                  <div class="panel-body">I am a farmer.</div>
                </div>
              </div>

              <div class="col-md-6">
                <div class="panel panel-default">
                  <div class="panel-heading">
                    <h4>
                      Hobbies
                    </h4>
                  </div>
                  <div class="panel-body">I like to spend time drinking beer eith my close friends on the weekends.</div>
                </div>
              </div>

-->
          </div>
        </div>

    </div>
    <!-- /.container -->

    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <p>SER 518 - Group 7</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="../js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="../js/bootstrap.min.js"></script>

    <script>

      $(document).ready(function () {

        $.getJSON("http://localhost:8080/user/12", function(result) {
          //$.get("profile.json", function(result) {
          //console.log(result);
          /*var addr = result.address.split(",")[0];
          var city = result.address.split(",")[1];
          var city = result.address.split(",")[2];
          var city = result.address.split(",")[3];*/

          $("#fullname").html(result.firstname + " " + result.lastname);
          $("#gender").html(result.gender);
          $("#address").html(result.addr + ", " + result.city + ", " + result.state + " " + result.zip);

          $("#firstname").attr("value", result.firstname);
          $("#lastname").attr("value", result.lastname);
          $("#password").attr("value", result.password);
          $("#password2").attr("value", result.password);
          //$("#addr").attr("value", result.addr);
          //$("#city").attr("value", result.city);
          //$("#zip").attr("value", result.zip);

        }, "json");


        $("#firstname_error_msg").hide();
        $("#lastname_error_msg").hide();
        $("#email_error_msg").hide();
        $("#password_error_msg").hide();
        $("#password2_error_msg").hide();
        $("#addr_error_msg").hide();
        $("#city_error_msg").hide();
        $("#state_error_msg").hide();
        $("#zip_error_msg").hide();


        var error_firstname = false;
        var error_lastname = false;
        var error_email = false;
        var error_password = false;
        var error_password2 = false;
        var error_addr = false;
        var error_city = false;
        var error_state = false;
        var error_zip = false;


        $('#firstname').focusout(function () {
            check_firstname();
        });

        $('#lastname').focusout(function () {
            check_lastname();
        });

        $('#password').focusout(function () {
            check_password();
        });

        $('#password2').focusout(function () {
            check_password2();
        });

        $('#addr').focusout(function () {
            check_addr();
        });

        $('#city').focusout(function () {
            check_city();
        });

        $('#state').focusout(function () {
            check_state();
        });

        $('#zip').focusout(function () {
            check_zip();
        });


        function check_firstname() {

            var fname = $("#firstname").val();

            var pat = new RegExp(/^[a-z]{2,14}$/i);

            if(fname == null || fname == "") {
                $("#firstname_error_msg").html(" * Enter your First Name");
                $("#firstname_error_msg").show();
                error_firstname = true;
            }
            else if(!pat.test(fname)) {
                $("#firstname_error_msg").html(" * Enter a Valid name having 2-14 characters (alphabets only)");
                $("#firstname_error_msg").show();
                error_firstname = true;
            }
            else {
                $("#firstname_error_msg").hide();
            }
        }

        function check_lastname() {

            var lname = $("#lastname").val();

            var patt = new RegExp(/^[a-z ,.'-]+$/i);

            if(lname.trim() == "") {
              $("#lastname_error_msg").html(" * Enter your Last Name");
              $("#lastname_error_msg").show();
              error_lastname = true;
            }
            else if(!patt.test(lname)) {
              $("#lastname_error_msg").html(" * Enter a Valid name having alphabets and .,'- symbols only");
              $("#lastname_error_msg").show();
              error_lastname = true;
            }
            else {
              $("#lastname_error_msg").hide();
            }
        }

        function check_password() {

            if ($("#password").val().length < 8) {
                $("#password_error_msg").html(" * Password must have 8 or more characters");
                $("#password_error_msg").show();
                error_password = true;
            }
            else {
                $("#password_error_msg").hide();
            }
        }

        function check_password2() {

            var pass1 = $("#password").val();

            var pass2 = $("#password2").val();

            if(pass1 != pass2) {
                $("#password2_error_msg").html(" * Password doesn't match");
                $("#password2_error_msg").show();
                error_password2 = true;
            }
            else {
                $("#password2_error_msg").hide();
            }
        }

        function check_addr() {

          if($("#addr").val().trim() == "") {
            $("#addr_error_msg").html(" * Enter your address");
            $("#addr_error_msg").show();
            error_addr = true;
          }
          else {
            $("#addr_error_msg").hide();
          }
        }

    function check_city() {

      var city_pattern = new RegExp(/^[a-zA-Z\- ]+$/i);

      var city = $("#city").val();

      if(!city_pattern.test(city)) {
        $("#city_error_msg").html(" * Enter a valid City name");
        $("#city_error_msg").show();
        error_city = true;
      }
      else {
        $("#city_error_msg").hide();
      }
    }

    function check_state() {

      if($("#state").val() == "") {
        $("#state_error_msg").html(" * Select the State you reside in");
        $("#state_error_msg").show();
        error_state = true;
      }
      else {
        $("#state_error_msg").hide();
      }
    }

    function check_zip() {

      var zip_pattern = new RegExp(/^[0-9]{5}$/);

      var zip = $("#zip").val();

      if(!zip_pattern.test(zip)) {
        $("#zip_error_msg").html(" * Enter a valid ZIP code");
        $("#zip_error_msg").show();
        error_zip = true;
      }
      else {
        $("#zip_error_msg").hide();
      }
    }

        $("#editprofile").submit(function () {

            error_firstname = false;
            error_lastname = false;
            error_password = false;
            error_password2 = false;
            error_addr = false;
            error_city = false;
            error_state = false;
            error_zip = false;


            check_firstname();
            check_lastname();
            check_password();
            check_password2();
            check_addr();
            check_city();
            check_state();
            check_zip();

            if (error_firstname == false && error_lastname == false && error_password == false && error_password2 == false && error_addr == false && error_city == false && error_state == false && error_zip == false) {
                return true;
            }
            else
                return false;

        });
    });

    function validateCredentials() {
        //alert("Hi Please sign Up")
        $.ajax({
            type: "POST",
            crossDomain: true,
            url: "http://localhost:8080/user/1",
            data: {
                firstname: document.getElementsByName("firstname")[0].value,
                lastname: document.getElementsByName("lastname")[0].value,
                //email: document.getElementsByName("email")[0].value,
                password: document.getElementsByName("password")[0].value,
                address: document.getElementsByName("addr")[0].value,
                city: document.getElementsByName("city")[0].value,
                state: document.getElementsByName("state")[0].value,
                zip: document.getElementsByName("zip")[0].value,
                //gender: $('input[name=gender]:checked').val()
            },
            success: function (response) {
                //code for setting session and sign in
                if (response.toString() == "success")
                    alert("You have SignedUp! Please Login")
            }
        });
    }
 </script>

</body>

</html>
