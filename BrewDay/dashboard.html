<!DOCTYPE html>
<html lang="en">

<head>
        <script src="js/jquery.js"></script>
        <script>
            function logoutFunction(event) {
              event.preventDefault();
              window.location.href= 'https://vashama.github.io/BrewDay/BrewDay/index.html';
            }
            function brewTodayFunction(event) {
              var output = "";
          //    alert("In function");
              $.ajax({
                    type: "POST",
                    crossDomain: true,
                    url: "http://localhost:8080/pareto/main",
            success: function (response) {
                //code for setting session and sign in
                output = response.toString();
               // $("$brewingName").html(output);
                //alert(output);
            }
            });
              //alert("output: " + output);
              window.location.href= 'https://vashama.github.io/BrewDay/BrewDay/brewToday.html';
            }
        </script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Brew Day</title>

    <link rel="icon" type="logo.jpg" href="img/logo.png">

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/brewday.css" rel="stylesheet">

</head>

<body>

    <div class="brand">DASHBOARD</div>

    <!-- Navigation -->
    <nav class="navbar navbar-default" role="navigation">
        <div class="container">
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav">
                        <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown"> Recipes <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                    <li>
                                        <a href="userRecipes.html">My Recipes</a>
                                    </li>
                                    <li class="divider">
                                    </li>
                                    <li>
                                        <a href="myRecipes.html">Add Recipes</a>
                                    </li>
                                    <li class="divider">
                                    </li>
                                    <li>
                                        <a href="javascript:brewTodayFunction(event);">What should I brew today?</a>
                                    </li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown"> Ingredients <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                                <li>
                                   <a href="myIngredients.html">My Ingredients</a>
                                </li>
                                <li class="divider">
                                </li>
                                <li>
                                    <a href="ingredients.html">Add Ingredients</a>
                                </li>
                                <li class="divider">
                                </li>
                                <li>
                                    <a href="grains.html">Grain Malts</a>
                                </li>
                                <li class="divider">
                                </li>
                                <li>
                                    <a href="hops.html">Hops</a>
                                </li>
                                <li class="divider">
                                </li>
                                <li>
                                    <a href="sugars.html">Sugars</a>
                                </li>
                                <li class="divider">
                                </li>
                                <li>
                                    <a href="yeast.html">Yeast</a>
                                </li>
                                <li class="divider">
                                </li>
                                <li>
                                    <a href="equipment.html">Equipment</a>
                                </li>
                        </ul>
                    </li>
                        <li>
                            <a href="forum.html">Forum</a>
                        </li>
                        <li class="dropdown">
                                <a href="#" data-toggle="dropdown" class="droptown-toggle">Help <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    <li>
                                        <a href="contactSupport.html">Contact Support</a>
                                    </li>
                                    <li class="divider">
                                    </li>
                                    <li class ="dropdown-submenu">
                                        <a href="#" class="test" data-toggle="dropdown" class="droptown-toggle">Documentation<span class="caret"></span>
                                        </a>
                                    </li>
                                </ul>
                        </li>
                        <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-user"></i>USER<b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                  <li>
                                      <a href="dashboard.html"> Dashboard</a>
                                  </li>
                                  <li class="divider">
                                  </li>
                                  <li>
                                      <a href="viewProfile.html">My Profile</a>
                                  </li>
                                  <li class="divider">
                                  </li>
                                  <li>
                                      <a href="profile.html">Update Profile</a>
                                  </li>
                                  <li class="divider">
                                  </li>
                                    <li>
                                        <a href="http://localhost:8080/user/logout" onclick='logoutFunction(event);'> Log Out</a>
                                    </li>
                                </ul>
                        </li>
                    </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
</nav>

    <div class="container">

        <div class="row">
            <div class="box">
                <div class="col-md-6">
                    <hr>
                    <h2 class="intro-text text-center">Your Recipes</h2>
                    <hr>
                    <center>
                      <div id="yourRecipes">
                        <!--
                        <a href="#" class="btn btn-link">
                            <strong>Double Chocolate Oatmeal Stout</strong>
                        </a>
                        <br> Beer Style:
                        <em>Stout</em>
                        <br> Batch Size:
                        <em>5 gallons</em>
                        <hr />
                        <a href="#" class="btn btn-link">
                            <strong>Corn Beer</strong>
                        </a>
                        <br> Beer Style:
                        <em>American Ale</em>
                        <br> Batch Size:
                        <em>5 gallons</em>
                        <hr />
                        <a href="#" class="btn btn-link">
                            <strong>Belgian Bombshell</strong>
                        </a>
                        <br> Beer Style:
                        <em>Belgian and French Ale</em>
                        <br> Batch Size:
                        <em>5.5 gallons</em>
                        <hr />
                        -->
                      </div>
                      <a href="userRecipes.html" type="button" class="btn btn-primary">All Recipes</a>
                    </center>
                </div>
                <div class="col-md-6">
                    <hr>
                    <h2 class="intro-text text-center">Your Ingredients</h2>
                    <hr>
                    <center>
                        <table class="table table-striped" style="width:75%">
                            <thead>
                                <tr>
                                    <th scope="col">Type</th>
                                    <th scope="col">Quantity</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Grain Malts</td>
                                    <td id="total_grainmalts"></td>
                                </tr>
                                <tr>
                                    <td>Hops</td>
                                    <td id="total_hops"></td>
                                </tr>
                                <tr>
                                  <td>Sugar</td>
                                  <td id="total_sugar"></td>
                                </tr>
                                <tr>
                                    <td>Yeast</td>
                                    <td id="total_yeast"></td>
                                </tr>
                            </tbody>
                        </table>
                        <hr />
                        <a href="myIngredients.html" type="button" class="btn btn-primary">Details</a>
                    </center>
                </div>

                <div class="clearfix"></div>
            </div>
        </div>

        <div class="row">
            <div class="box">
                <div class="col-md-6">
                    <hr>
                    <h2 class="intro-text text-center">Popular Recipes</h2>
                    <hr>
                    <center>
                        <a href="#" class="btn btn-link">
                            <strong>Raspberry Wheat AG</strong>
                        </a>
                        <br> Beer Style:
                        <em>Fruit Beer</em>
                        <br> Batch Size:
                        <em>5 gallons</em>
                        <hr />
                        <a href="#" class="btn btn-link">
                            <strong>Hustler Honey Ale</strong>
                        </a>
                        <br> Beer Style:
                        <em>American Ale</em>
                        <br> Batch Size:
                        <em>5 gallons</em>
                        <hr />
                        <a href="#" class="btn btn-link">
                            <strong>Bavarian Weizen</strong>
                        </a>
                        <br> Beer Style:
                        <em>German Wheat and Rye Beer</em>
                        <br> Batch Size:
                        <em>5 gallons</em>
                        <hr />
                        <a href="#" class="btn btn-link">
                            <strong>Iceberg On The Horizon Pale Ale</strong>
                        </a>
                        <br> Beer Style:
                        <em>American Ale</em>
                        <br> Batch Size:
                        <em>5 gallons</em>
                        <hr />
                        <a href="#" class="btn btn-link">
                            <strong>Psychobier</strong>
                        </a>
                        <br> Beer Style:
                        <em>Scottish and Irish Ale</em>
                        <br> Batch Size:
                        <em>14.27 gallons</em>
                        <hr />
                    </center>
                </div>
                <div class="col-md-6">
                    <hr>
                    <h2 class="intro-text text-center">New Recipes</h2>
                    <hr>
                    <center>
                        <a href="#" class="btn btn-link">
                            <strong>Double Chocolate Oatmeal Stout</strong>
                        </a>
                        <br> Beer Style:
                        <em>Stout</em>
                        <br> Batch Size:
                        <em>5 gallons</em>
                        <hr />
                        <a href="#" class="btn btn-link">
                            <strong>Gruit Ale Recipe</strong>
                        </a>
                        <br> Beer Style:
                        <em>Spice/Herb/Vegetable Beer</em>
                        <br> Batch Size:
                        <em>5.5 gallons</em>
                        <hr />
                        <a href="#" class="btn btn-link">
                            <strong>Bohemian Millet Pilsner</strong>
                        </a>
                        <br> Beer Style:
                        <em>Pilsner</em>
                        <br> Batch Size:
                        <em>5 gallons</em>
                        <hr />
                        <a href="#" class="btn btn-link">
                            <strong>Pumpkin Spice Beer</strong>
                        </a>
                        <br> Beer Style:
                        <em>Spice/Herb/Vegetable Beer</em>
                        <br> Batch Size:
                        <em>5 gallons</em>
                        <hr />
                        <a href="#" class="btn btn-link">
                            <strong>Munich Madness All Grain</strong>
                        </a>
                        <br> Beer Style:
                        <em>European Amber Lager</em>
                        <br> Batch Size:
                        <em>5 gallons</em>
                        <hr />
                    </center>
                </div>

                <div class="clearfix"></div>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <p>SER 518 - Group 7</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- jQuery -->

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>

    <script type="text/javascript">

    $(document).ready(function() {

        var totalGrainmalts = 0;
        var totalHops = 0;
        var totalSugar = 0;
        var totalYeast = 0;

        $.getJSON("http://localhost:8080/ingredient", function(result) {
          //$.getJSON("ing.json", function(result) {
          //console.log(result);

          $.each(result, function(index, item) {

            if(item.type == "Sugar") {
              totalSugar += item.quantity;
            }
            else if(item.type == "Grain Malts"){
              totalGrainmalts += item.quantity;
            }
            else if(item.type == "Hops"){
              totalHops += item.quantity;
            }
            else if(item.type == "Yeast"){
              totalYeast += item.quantity;
            }

          });

          $("#total_grainmalts").html(totalGrainmalts + " lb");
          $("#total_hops").html(totalHops + " lb");
          $("#total_sugar").html(totalSugar + " lb");
          $("#total_yeast").html(totalYeast + " pkgs");

        });

        var recent3recipeslist = "";

      $.getJSON("http://localhost:8080/recipe", function(recipeData) {
        //$.getJSON("result.json", function(recipeData) {
        //console.log(recipeData.length);

        var threeRecipes = "";

        if(recipeData.length > 3) {
            threeRecipes = recipeData.reverse().slice(0, 3);
        }
        else {
            threeRecipes = recipeData.reverse();
        }

        $.each(threeRecipes, function(index, item) {

          var boiltime = item.boilTime.split(":")[0];

          recent3recipeslist += `<a href="#modal` + index + `" class="btn btn-link" data-toggle="modal">
                                    <strong>` + item.recipename + `</strong>
                                  </a>
                                  <br> Beer Style:
                                  <strong>` + item.brewType + `</strong>
                                  <br> Batch Size:
                                  <strong>` + item.batchSize + ` gallons</strong>
                                  <hr />

                                  <!-- Modal -->
                                  <div class="modal fade" id="modal` + index + `" role="dialog">
                                    <div class="modal-dialog">

                                      <!-- Modal content-->
                                      <div class="modal-content">
                                        <div class="modal-header">
                                          <button type="button" class="close" data-dismiss="modal">&times;</button>
                                          <h4 class="modal-title">` + item.recipename + `</h4>
                                        </div>
                                        <div class="modal-body">
                                          <p>` + item.instructions + `</p>
                                          <h5 class="text-center"> Boil time: ` + boiltime + ` minutes</h5>
                                        </div>
                                        <div class="modal-footer">
                                          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                        </div>
                                      </div>

                                    </div>
                                  </div>
                                  `;
        });

        $("#yourRecipes").append(recent3recipeslist);

      });

    });

    </script>

</body>

</html>
